{"version":3,"sources":["webpack:///./table/base.js","webpack:///./table/index.js","webpack:///./table/util.js","webpack:///./table/expand_table.js","webpack:///./table/table.js","webpack:///./table/select_table.js","webpack:///./table/diy_table.js","webpack:///./table/expand_select_table.js"],"names":["__webpack_require__","_locales","_util","BaseTable","processItem","item","Cell","row","undefined","value","_react2","default","createElement","className","Header","_","isString","sortable","SortHeader","_extends","minWidth","React","Component","_this2","this","_props","props","data","columns","defaultPageSize","showPagination","style","rest","_objectWithoutProperties","newColumns","map","v","vv","newStyle","Object","assign","height","overflow","_reactTable2","pageSize","Math","max","length","_classnames2","defaultProps","keyField","noDataText","getLocale","loadingText","TableUtil","OperationHeader","OperationCell","Table","ExpandTable","ExpandSelectTable","SelectTable","diyTableHOC","color","type","gm-react-table-sort-header-asc","gm-react-table-sort-header-desc","propTypes","PropTypes","oneOf","_classCallCheck","_this","_possibleConstructorReturn","__proto__","getPrototypeOf","call","handleExpandAll","isAllExpanded","setState","expanded","newExpanded","each","i","renderHeader","state","filter","onClick","bind","renderExpander","_ref","index","handleExpandedChange","_base2","expander","Expander","concat","_toConsumableArray","onExpandedChange","loading","bool","array","isRequired","SubComponent","func","HocSelectTable","_selectTable2","isSelected","key","selected","includes","handleToggleSelection","_this$props","onSelect","selectType","xor","selectAll","onSelectAll","selectAllTip","ref","_ref2","toggleSelection","toggleAll","string","_checkbox","_gmUtil","_reactDom","DiyTable","_React$Component","apiToggleDiy","__isUnmounted","isShow","handleCloseDiySelector","target","diySelectorRef","contains","findDOMNode","setTimeout","_ref2$diyDisable","diyDisable","diyHeaderObj","_inherits","_createClass","window","document","body","addEventListener","diyID","id","Storage","get","accessor","_item$show","show","itemShow","isBoolean","removeEventListener","slice","_columns$index$show","obj","clone","_columns$index","set","_state","_flex2","wrap","_ref3","_item$show2","checked","diyCheckboxText","text","width","Checkbox","onChange","handleCheck"],"mappings":"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","file":"js/1.4e8e0186.bundle.js","sourcesContent":["import React from 'react'\nimport classNames from 'classnames'\nimport { getLocale } from '../src/locales'\nimport _ from 'lodash'\nimport { SortHeader } from './util'\nimport ReactTable from 'react-table'\n\nclass BaseTable extends React.Component {\n  processItem = item => {\n    let Cell = item.Cell\n    if (!Cell) {\n      Cell = row => {\n        if (row.value === undefined || row.value === null || row.value === '') {\n          return <span className='gm-text-desc'>-</span>\n        }\n        return row.value\n      }\n    }\n\n    let Header = item.Header\n    if (_.isString(Header) && item.sortable) {\n      Header = <SortHeader>{Header}</SortHeader>\n    }\n\n    return {\n      ...item,\n      Header,\n      sortable: !!item.sortable,\n      // 有意义，如果是 undefined, 则赋值 undefined，覆盖默认值 100\n      minWidth: item.minWidth,\n      Cell\n    }\n  }\n\n  render () {\n    let {\n      data,\n      columns,\n      defaultPageSize,\n      showPagination,\n      className,\n      style,\n      ...rest\n    } = this.props\n\n    const newColumns = _.map(columns, v => {\n      // groups 的形式\n      if (v.columns) {\n        const columns = _.map(v.columns, vv => this.processItem(vv))\n\n        return {\n          ...v,\n          columns\n        }\n      } else {\n        return this.processItem(v)\n      }\n    })\n\n    const newStyle = Object.assign({}, style)\n\n    if (newStyle.height) {\n      newStyle.overflow = 'auto'\n    }\n\n    return (\n      <ReactTable\n        {...rest}\n        columns={newColumns}\n        data={data}\n        defaultPageSize={defaultPageSize}\n        pageSize={Math.max(data.length, 1)}\n        className={classNames('gm-react-table -striped -highlight', className)}\n        style={newStyle}\n        showPagination={showPagination}\n      />\n    )\n  }\n}\n\nBaseTable.defaultProps = {\n  showPagination: false,\n  keyField: 'value',\n  defaultPageSize: 10,\n  noDataText: getLocale('table', 'noDataText'),\n  loadingText: getLocale('table', 'loadingText')\n}\n\nexport default BaseTable\n","import Table from './table'\nimport SelectTable from './select_table'\nimport ExpandTable from './expand_table'\nimport diyTableHOC from './diy_table'\nimport ExpandSelectTable from './expand_select_table'\nimport 'react-table/react-table.css'\nimport './style.less'\nimport { OperationHeader, OperationCell, SortHeader } from './util'\n\nconst TableUtil = {\n  OperationHeader, OperationCell, SortHeader\n}\n\nexport {\n  Table,\n  ExpandTable,\n  ExpandSelectTable,\n  SelectTable,\n  TableUtil,\n  diyTableHOC\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\n\nconst OperationHeader = (\n  <div className='text-center'>\n    <i\n      className='xfont xfont-fun'\n      style={{color: 'rgb(19, 193, 159)'}}\n    />\n  </div>\n)\n\nconst OperationCell = function (props) {\n  return <div {...props} className={classNames('text-center', props.className)}/>\n}\n\nclass SortHeader extends React.Component {\n  render () {\n    const {\n      className,\n      type,\n      ...rest\n    } = this.props\n\n    return <span {...rest} className={classNames('gm-react-table-sort-header gm-cursor', {\n      'gm-react-table-sort-header-asc': type === 'asc',\n      'gm-react-table-sort-header-desc': type === 'desc'\n    }, className)}/>\n  }\n}\n\nSortHeader.propTypes = {\n  type: PropTypes.oneOf(['asc', 'desc'])\n}\n\nexport {\n  OperationHeader,\n  OperationCell,\n  SortHeader\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport BaseTable from './base'\nimport _ from 'lodash'\n\nclass ExpandTable extends React.Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      expanded: {}\n    }\n  }\n\n  handleExpandAll = (isAllExpanded) => {\n    const {data} = this.props\n\n    if (isAllExpanded) {\n      this.setState({\n        expanded: {}\n      })\n    } else {\n      const newExpanded = {}\n      _.each(data, (v, i) => {\n        newExpanded[i] = {}\n      })\n      this.setState({\n        expanded: newExpanded\n      })\n    }\n  }\n\n  renderHeader = () => {\n    const {data} = this.props\n    const {expanded} = this.state\n\n    // 注意此逻辑\n    const isAllExpanded = _.filter(expanded, v => v).length === data.length\n\n    return (\n      <div className='gm-cursor' onClick={this.handleExpandAll.bind(this, isAllExpanded)}>\n        {isAllExpanded ? <i className='xfont xfont-minus' /> : <i\n          className='xfont xfont-plus' />}\n      </div>\n    )\n  }\n\n  renderExpander = ({index}) => {\n    const {expanded} = this.state\n\n    return (\n      <div>\n        {expanded[index] ? <i className='xfont xfont-minus'/> : <i className='xfont xfont-plus'/>}\n      </div>\n    )\n  }\n\n  handleExpandedChange = (expanded) => {\n    this.setState({\n      expanded\n    })\n  }\n\n  render () {\n    const {\n      columns,\n      ...rest\n    } = this.props\n    const {expanded} = this.state\n\n    return (\n      <BaseTable\n        {...rest}\n        columns={[{\n          expander: true,\n          Header: this.renderHeader,\n          Expander: this.renderExpander\n        }, ...columns]}\n        expanded={expanded}\n        onExpandedChange={this.handleExpandedChange}\n      />\n    )\n  }\n}\n\nExpandTable.propTypes = {\n  loading: PropTypes.bool,\n  data: PropTypes.array.isRequired,\n  columns: PropTypes.array.isRequired,\n  SubComponent: PropTypes.func.isRequired\n}\n\nexport default ExpandTable\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport BaseTable from './base'\n\nclass Table extends React.Component {\n  render () {\n    const {...rest} = this.props\n\n    return <BaseTable {...rest}/>\n  }\n}\n\nTable.propTypes = {\n  loading: PropTypes.bool,\n  data: PropTypes.array.isRequired,\n  columns: PropTypes.array.isRequired\n}\n\nexport default Table\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport BaseTable from './base'\nimport hocSelectTable from 'react-table/lib/hoc/selectTable'\nimport _ from 'lodash'\n\nconst HocSelectTable = hocSelectTable(BaseTable)\n\nclass SelectTable extends React.Component {\n  isSelected = (key) => {\n    const { selected } = this.props\n\n    return selected.includes(key)\n  }\n\n  handleToggleSelection = (key) => {\n    const { selected, onSelect, selectType } = this.props\n\n    if (selectType === 'radio') {\n      onSelect([key])\n    } else {\n      onSelect(_.xor(selected, [key]))\n    }\n  }\n\n  render () {\n    const {\n      loading, data, columns,\n      defaultPageSize,\n      selectAll, onSelectAll, selectAllTip,\n      selectType,\n      keyField,\n      noDataText, loadingText,\n      ...rest\n    } = this.props\n\n    return (\n      <div className='gm-react-table-select'>\n        <HocSelectTable\n          {...rest}\n          ref={ref => (this.ref = ref)}\n          loading={loading}\n          data={data}\n          columns={columns}\n          defaultPageSize={defaultPageSize}\n          className='-striped -highlight'\n          showPagination={false}\n          selectAll={selectAll}\n          isSelected={this.isSelected}\n          toggleSelection={this.handleToggleSelection}\n          toggleAll={onSelectAll}\n          selectType={selectType}\n          keyField={keyField}\n          noDataText={noDataText}\n          loadingText={loadingText}\n        />\n        {selectAllTip && selectAll && <div className='gm-react-table-select-all-tip'>{selectAllTip}</div>}\n      </div>\n    )\n  }\n}\n\nSelectTable.propTypes = {\n  loading: PropTypes.bool,\n  data: PropTypes.array.isRequired,\n  columns: PropTypes.array.isRequired,\n  selected: PropTypes.array.isRequired,\n  onSelect: PropTypes.func.isRequired,\n  selectAll: PropTypes.bool.isRequired,\n  onSelectAll: PropTypes.func.isRequired,\n  selectAllTip: PropTypes.string,\n  keyField: PropTypes.string,\n  selectType: PropTypes.oneOf(['checkbox', 'radio']) // 如果是 radio， selectAll  onSelectAll 没意义\n}\n\nSelectTable.defaultProps = {\n  selectType: 'checkbox'\n}\n\nexport default SelectTable\n","import React from 'react'\nimport _ from 'lodash'\nimport PropTypes from 'prop-types'\nimport { Checkbox } from '../src/component/checkbox'\nimport Storage from '../src/component/storage'\nimport Flex from '../src/component/flex'\nimport { contains } from 'gm-util'\nimport { findDOMNode } from 'react-dom'\n\nfunction diyTableHOC (Component) {\n  class DiyTable extends React.Component {\n    constructor (props) {\n      super(props)\n      this.state = {\n        // 把没有查看权限的列去掉,查看权限默认为true\n        columns: _.filter(props.columns, ({diyDisable = false}) => !diyDisable),\n        isShow: false,\n        diyHeaderObj: {}\n      }\n    }\n\n    componentDidMount () {\n      window.document.body.addEventListener('click', this.handleCloseDiySelector)\n      const {id: diyID} = this.props\n      const {columns} = this.state\n\n      // 组件挂载的时候,读取本地保存的diy配置\n      if (diyID) {\n        const diyHeaderObj = Storage.get(diyID) || {}\n\n        const newColumns = _.map(columns, item => {\n          const {id, accessor, show = true} = item\n          const key = id || accessor\n          // 优先使用localStorage的值,没有则使用column上的值\n          const itemShow = _.isBoolean(diyHeaderObj[key]) ? diyHeaderObj[key] : show\n\n          return {\n            ...item, show: itemShow\n          }\n        })\n\n        this.setState({columns: newColumns, diyHeaderObj})\n      }\n    }\n\n    componentWillUnmount () {\n      window.document.body.removeEventListener('click', this.handleCloseDiySelector)\n      this.__isUnmounted = true\n    }\n\n    // 显示diy选择框  注:暴露给外部使用\n    apiToggleDiy = () => {\n      if (!this.__isUnmounted) {\n        const {isShow} = this.state\n        this.setState({isShow: !isShow})\n      }\n    }\n\n    handleCloseDiySelector = ({target}) => {\n      const {isShow} = this.state\n\n      if (isShow && this.diySelectorRef && !contains(findDOMNode(this.diySelectorRef), target)) {\n        // 延后执行,使得再次点击按钮关闭diy\n        setTimeout(() => this.setState({isShow: false}), 0)\n      }\n    }\n\n    handleCheck (index) {\n      const columns = this.state.columns.slice()\n      const {show = true} = columns[index]\n      columns[index].show = !show\n      this.setState({columns})\n\n      const {id: diyID} = this.props\n      // 记录配置\n      if (diyID) {\n        const obj = _.clone(this.state.diyHeaderObj)\n        const {id, accessor} = columns[index]\n        const key = id || accessor\n        obj[key] = !show\n\n        this.setState({diyHeaderObj: obj})\n        Storage.set(diyID, obj)\n      }\n    }\n\n    render () {\n      const {columns, isShow} = this.state\n      const props = {\n        ...this.props, columns\n      }\n\n      return (<div className='gm-react-table-diy'>\n        <Component {...props}/>\n        {isShow && <Flex className='gm-react-table-diy-selector gm-box-shadow-bottom' wrap ref={ref => (this.diySelectorRef = ref)}>\n          {_.map(columns, (item, index) => {\n            const {id, accessor, show: checked = true, Header, diyCheckboxText} = item\n            const key = id || accessor\n            const text = diyCheckboxText || Header\n\n            // Header是字符串才展示自定义选择项\n            return _.isString(text) ? <div style={{width: '50%'}} key={key}>\n              <Checkbox\n                value={key}\n                checked={checked}\n                onChange={this.handleCheck.bind(this, index)}\n              >\n                {text}\n              </Checkbox>\n            </div> : null\n          })}\n        </Flex>}\n      </div>)\n    }\n  }\n\n  DiyTable.propTypes = {\n    id: PropTypes.string.isRequired,\n    loading: PropTypes.bool,\n    data: PropTypes.array.isRequired,\n    columns: PropTypes.array.isRequired\n  }\n  return DiyTable\n}\n\nexport default diyTableHOC\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport ExpandTable from './expand_table'\nimport hocSelectTable from 'react-table/lib/hoc/selectTable'\nimport _ from 'lodash'\n\nconst HocSelectTable = hocSelectTable(ExpandTable)\n\nclass ExpandSelectTable extends React.Component {\n  isSelected = (key) => {\n    const { selected } = this.props\n\n    return selected.includes(key)\n  }\n\n  handleToggleSelection = (key) => {\n    const { selected, onSelect, selectType } = this.props\n\n    if (selectType === 'radio') {\n      onSelect([key])\n    } else {\n      onSelect(_.xor(selected, [key]))\n    }\n  }\n\n  render () {\n    const {\n      loading, data, columns,\n      defaultPageSize,\n      selectAll, onSelectAll, selectAllTip,\n      selectType,\n      keyField,\n      SubComponent,\n      noDataText, loadingText,\n      ...rest\n    } = this.props\n\n    return (\n      <div className='gm-react-table-select'>\n        <HocSelectTable\n          {...rest}\n          ref={ref => (this.ref = ref)}\n          loading={loading}\n          data={data}\n          columns={columns}\n          defaultPageSize={defaultPageSize}\n          className='-striped -highlight'\n          showPagination={false}\n          selectAll={selectAll}\n          isSelected={this.isSelected}\n          toggleSelection={this.handleToggleSelection}\n          toggleAll={onSelectAll}\n          selectType={selectType}\n          keyField={keyField}\n          noDataText={noDataText}\n          loadingText={loadingText}\n          SubComponent={SubComponent}\n        />\n        {selectAllTip && selectAll && <div className='gm-react-table-select-all-tip'>{selectAllTip}</div>}\n      </div>\n    )\n  }\n}\n\nExpandSelectTable.propTypes = {\n  loading: PropTypes.bool,\n  data: PropTypes.array.isRequired,\n  columns: PropTypes.array.isRequired,\n  selected: PropTypes.array.isRequired,\n  onSelect: PropTypes.func.isRequired,\n  selectAll: PropTypes.bool.isRequired,\n  onSelectAll: PropTypes.func.isRequired,\n  selectAllTip: PropTypes.string,\n  keyField: PropTypes.string,\n  selectType: PropTypes.oneOf(['checkbox', 'radio']), // 如果是 radio， selectAll  onSelectAll 没意义\n  SubComponent: PropTypes.func.isRequired\n}\n\nExpandSelectTable.defaultProps = {\n  selectType: 'checkbox'\n}\n\nexport default ExpandSelectTable\n"],"sourceRoot":""}