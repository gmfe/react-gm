{"version":3,"sources":["webpack:///./table/diy_table.js","webpack:///./table/base.js","webpack:///./table/index.js","webpack:///./table/util.js","webpack:///./table/expand_table.js","webpack:///./table/table.js","webpack:///./table/select_table.js","webpack:///./table/expand_select_table.js"],"names":["__webpack_require__","_checkbox","_gmUtil","_reactDom","Component","_React$Component","DiyTable","props","_classCallCheck","this","_this","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","call","showDiySelector","bool","setState","isShow","handleCloseDiySelector","_ref","target","state","diySelectorRef","contains","findDOMNode","columns","_","filter","_ref2","_ref2$permission","permission","undefined","diyHeaderObj","_inherits","React","_createClass","key","value","window","document","body","addEventListener","localStorageKey","Storage","get","newColumns","map","item","id","accessor","_item$show","show","itemShow","isBoolean","_extends","console","log","removeEventListener","index","slice","_columns$index$show","obj","clone","_columns$index","set","_this2","_state","_react2","default","createElement","className","_flex2","wrap","ref","_ref3","_item$show2","checked","Header","HeaderText","text","isString","style","width","Checkbox","onChange","handleCheck","bind","_locales","_util","BaseTable","processItem","Cell","row","sortable","SortHeader","minWidth","_props","data","defaultPageSize","showPagination","rest","_objectWithoutProperties","v","vv","newStyle","assign","height","overflow","_reactTable2","pageSize","Math","max","length","_classnames2","defaultProps","keyField","noDataText","getLocale","loadingText","TableUtil","OperationHeader","OperationCell","Table","ExpandTable","ExpandSelectTable","SelectTable","color","type","gm-react-table-sort-header-asc","gm-react-table-sort-header-desc","propTypes","PropTypes","oneOf","diyTableHOC","handleExpandAll","isAllExpanded","expanded","newExpanded","each","i","renderHeader","onClick","renderExpander","handleExpandedChange","_base2","expander","Expander","concat","_toConsumableArray","onExpandedChange","loading","array","isRequired","SubComponent","func","HocSelectTable","_selectTable2","isSelected","selected","includes","handleToggleSelection","_this$props","onSelect","selectType","xor","selectAll","onSelectAll","selectAllTip","toggleSelection","toggleAll","string"],"mappings":"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","file":"js/1.a1252f2f.bundle.js","sourcesContent":["import React from 'react'\nimport _ from 'lodash'\nimport { Checkbox } from '../src/component/checkbox'\nimport Storage from '../src/component/storage'\nimport Flex from '../src/component/flex'\nimport { contains } from 'gm-util'\nimport { findDOMNode } from 'react-dom'\n\nfunction diyTableHOC (Component) {\n  return class DiyTable extends React.Component {\n    constructor (props) {\n      super(props)\n      this.state = {\n        // 把没有查看权限的列去掉,查看权限默认为true\n        columns: _.filter(props.columns, ({permission = true}) => permission),\n        isShow: false,\n        diyHeaderObj: {}\n      }\n    }\n\n    componentDidMount () {\n      window.document.body.addEventListener('click', this.handleCloseDiySelector)\n      const {localStorageKey} = this.props\n      const {columns} = this.state\n\n      // 组件挂载的时候,读取本地保存的diy配置\n      if (localStorageKey) {\n        const diyHeaderObj = Storage.get(localStorageKey) || {}\n\n        const newColumns = _.map(columns, item => {\n          const {id, accessor, show = true} = item\n          const key = id || accessor\n          // 优先使用localStorage的值,没有则使用column上的值\n          const itemShow = _.isBoolean(diyHeaderObj[key]) ? diyHeaderObj[key] : show\n\n          return {\n            ...item,\n            show: itemShow\n          }\n        })\n        console.log(newColumns)\n        this.setState({columns: newColumns, diyHeaderObj})\n      }\n    }\n\n    componentWillUnmount () {\n      window.document.body.removeEventListener('click', this.handleCloseDiySelector)\n    }\n\n    // 显示diy选择框  注:暴露给外部使用\n    showDiySelector = bool => {\n      this.setState({isShow: bool})\n    }\n\n    handleCloseDiySelector = ({target}) => {\n      const {isShow} = this.state\n\n      if (\n        isShow && this.diySelectorRef &&\n        !contains(findDOMNode(this.diySelectorRef), target)\n      ) {\n        this.showDiySelector(false)\n      }\n    }\n\n    handleCheck (index) {\n      const columns = this.state.columns.slice()\n      const {show = true} = columns[index]\n      columns[index].show = !show\n      this.setState({columns})\n\n      const {localStorageKey} = this.props\n      // 记录配置\n      if (localStorageKey) {\n        const obj = _.clone(this.state.diyHeaderObj)\n        const {id, accessor} = columns[index]\n        const key = id || accessor\n        obj[key] = !show\n\n        this.setState({diyHeaderObj: obj})\n        Storage.set(localStorageKey, obj)\n      }\n    }\n\n    render () {\n      const {columns, isShow} = this.state\n      const props = {\n        ...this.props,\n        columns\n      }\n\n      return (\n        <div className='gm-react-table-diy'>\n          <Component {...props}/>\n          {isShow &&\n          <Flex className='gm-react-table-diy-selector' wrap ref={ref => (this.diySelectorRef = ref)}>\n            {_.map(columns, (item, index) => {\n              const {id, accessor, show: checked = true, Header, HeaderText} = item\n              const key = id || accessor\n              const text = HeaderText || Header\n\n              // Header是字符串才展示自定义选择项\n              return _.isString(text)\n                ? <div style={{width: '50%'}} key={key}>\n                  <Checkbox\n                    value={key}\n                    checked={checked}\n                    onChange={this.handleCheck.bind(this, index)}\n                  >\n                    {text}\n                  </Checkbox>\n                </div>\n                : null\n            })}\n          </Flex>}\n        </div>\n      )\n    }\n  }\n}\n\nexport default diyTableHOC\n","import React from 'react'\nimport classNames from 'classnames'\nimport { getLocale } from '../src/locales'\nimport _ from 'lodash'\nimport { SortHeader } from './util'\nimport ReactTable from 'react-table'\n\nclass BaseTable extends React.Component {\n  processItem = item => {\n    let Cell = item.Cell\n    if (!Cell) {\n      Cell = row => {\n        if (row.value === undefined || row.value === null || row.value === '') {\n          return <span className='gm-text-desc'>-</span>\n        }\n        return row.value\n      }\n    }\n\n    let Header = item.Header\n    if (_.isString(Header) && item.sortable) {\n      Header = <SortHeader>{Header}</SortHeader>\n    }\n\n    return {\n      ...item,\n      Header,\n      sortable: !!item.sortable,\n      // 有意义，如果是 undefined, 则赋值 undefined，覆盖默认值 100\n      minWidth: item.minWidth,\n      Cell\n    }\n  }\n\n  render () {\n    let {\n      data,\n      columns,\n      defaultPageSize,\n      showPagination,\n      className,\n      style,\n      ...rest\n    } = this.props\n\n    const newColumns = _.map(columns, v => {\n      // groups 的形式\n      if (v.columns) {\n        const columns = _.map(v.columns, vv => this.processItem(vv))\n\n        return {\n          ...v,\n          columns\n        }\n      } else {\n        return this.processItem(v)\n      }\n    })\n\n    const newStyle = Object.assign({}, style)\n\n    if (newStyle.height) {\n      newStyle.overflow = 'auto'\n    }\n\n    return (\n      <ReactTable\n        {...rest}\n        columns={newColumns}\n        data={data}\n        defaultPageSize={defaultPageSize}\n        pageSize={Math.max(data.length, 1)}\n        className={classNames('gm-react-table -striped -highlight', className)}\n        style={newStyle}\n        showPagination={showPagination}\n      />\n    )\n  }\n}\n\nBaseTable.defaultProps = {\n  showPagination: false,\n  keyField: 'value',\n  defaultPageSize: 10,\n  noDataText: getLocale('table', 'noDataText'),\n  loadingText: getLocale('table', 'loadingText')\n}\n\nexport default BaseTable\n","import Table from './table'\nimport SelectTable from './select_table'\nimport ExpandTable from './expand_table'\nimport ExpandSelectTable from './expand_select_table'\nimport 'react-table/react-table.css'\nimport './style.less'\nimport { OperationHeader, OperationCell, SortHeader } from './util'\n\nconst TableUtil = {\n  OperationHeader, OperationCell, SortHeader\n}\n\nexport {\n  Table,\n  ExpandTable,\n  ExpandSelectTable,\n  SelectTable,\n  TableUtil\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\n\nconst OperationHeader = (\n  <div className='text-center'>\n    <i\n      className='xfont xfont-fun'\n      style={{color: 'rgb(19, 193, 159)'}}\n    />\n  </div>\n)\n\nconst OperationCell = function (props) {\n  return <div {...props} className={classNames('text-center', props.className)}/>\n}\n\nclass SortHeader extends React.Component {\n  render () {\n    const {\n      className,\n      type,\n      ...rest\n    } = this.props\n\n    return <span {...rest} className={classNames('gm-react-table-sort-header gm-cursor', {\n      'gm-react-table-sort-header-asc': type === 'asc',\n      'gm-react-table-sort-header-desc': type === 'desc'\n    }, className)}/>\n  }\n}\n\nSortHeader.propTypes = {\n  type: PropTypes.oneOf(['asc', 'desc'])\n}\n\nexport {\n  OperationHeader,\n  OperationCell,\n  SortHeader\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport BaseTable from './base'\nimport _ from 'lodash'\nimport diyTableHOC from './diy_table'\n@diyTableHOC\nclass ExpandTable extends React.Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      expanded: {}\n    }\n  }\n\n  handleExpandAll = (isAllExpanded) => {\n    const {data} = this.props\n\n    if (isAllExpanded) {\n      this.setState({\n        expanded: {}\n      })\n    } else {\n      const newExpanded = {}\n      _.each(data, (v, i) => {\n        newExpanded[i] = {}\n      })\n      this.setState({\n        expanded: newExpanded\n      })\n    }\n  }\n\n  renderHeader = () => {\n    const {data} = this.props\n    const {expanded} = this.state\n\n    // 注意此逻辑\n    const isAllExpanded = _.filter(expanded, v => v).length === data.length\n\n    return (\n      <div className='gm-cursor' onClick={this.handleExpandAll.bind(this, isAllExpanded)}>\n        {isAllExpanded ? <i className='xfont xfont-minus' /> : <i\n          className='xfont xfont-plus' />}\n      </div>\n    )\n  }\n\n  renderExpander = ({index}) => {\n    const {expanded} = this.state\n\n    return (\n      <div>\n        {expanded[index] ? <i className='xfont xfont-minus'/> : <i className='xfont xfont-plus'/>}\n      </div>\n    )\n  }\n\n  handleExpandedChange = (expanded) => {\n    this.setState({\n      expanded\n    })\n  }\n\n  render () {\n    const {\n      columns,\n      ...rest\n    } = this.props\n    const {expanded} = this.state\n\n    return (\n      <BaseTable\n        {...rest}\n        columns={[{\n          expander: true,\n          Header: this.renderHeader,\n          Expander: this.renderExpander\n        }, ...columns]}\n        expanded={expanded}\n        onExpandedChange={this.handleExpandedChange}\n      />\n    )\n  }\n}\n\nExpandTable.propTypes = {\n  loading: PropTypes.bool,\n  data: PropTypes.array.isRequired,\n  columns: PropTypes.array.isRequired,\n  SubComponent: PropTypes.func.isRequired\n}\n\nexport default ExpandTable\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport BaseTable from './base'\nimport diyTableHOC from './diy_table'\n\n@diyTableHOC\nclass Table extends React.Component {\n  render () {\n    const {...rest} = this.props\n\n    return <BaseTable {...rest}/>\n  }\n}\n\nTable.propTypes = {\n  loading: PropTypes.bool,\n  data: PropTypes.array.isRequired,\n  columns: PropTypes.array.isRequired\n}\n\nexport default Table\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport BaseTable from './base'\nimport hocSelectTable from 'react-table/lib/hoc/selectTable'\nimport _ from 'lodash'\nimport diyTableHOC from './diy_table'\n\nconst HocSelectTable = hocSelectTable(BaseTable)\n@diyTableHOC\nclass SelectTable extends React.Component {\n  isSelected = (key) => {\n    const { selected } = this.props\n\n    return selected.includes(key)\n  }\n\n  handleToggleSelection = (key) => {\n    const { selected, onSelect, selectType } = this.props\n\n    if (selectType === 'radio') {\n      onSelect([key])\n    } else {\n      onSelect(_.xor(selected, [key]))\n    }\n  }\n\n  render () {\n    const {\n      loading, data, columns,\n      defaultPageSize,\n      selectAll, onSelectAll, selectAllTip,\n      selectType,\n      keyField,\n      noDataText, loadingText,\n      ...rest\n    } = this.props\n\n    return (\n      <div className='gm-react-table-select'>\n        <HocSelectTable\n          {...rest}\n          ref={ref => (this.ref = ref)}\n          loading={loading}\n          data={data}\n          columns={columns}\n          defaultPageSize={defaultPageSize}\n          className='-striped -highlight'\n          showPagination={false}\n          selectAll={selectAll}\n          isSelected={this.isSelected}\n          toggleSelection={this.handleToggleSelection}\n          toggleAll={onSelectAll}\n          selectType={selectType}\n          keyField={keyField}\n          noDataText={noDataText}\n          loadingText={loadingText}\n        />\n        {selectAllTip && selectAll && <div className='gm-react-table-select-all-tip'>{selectAllTip}</div>}\n      </div>\n    )\n  }\n}\n\nSelectTable.propTypes = {\n  loading: PropTypes.bool,\n  data: PropTypes.array.isRequired,\n  columns: PropTypes.array.isRequired,\n  selected: PropTypes.array.isRequired,\n  onSelect: PropTypes.func.isRequired,\n  selectAll: PropTypes.bool.isRequired,\n  onSelectAll: PropTypes.func.isRequired,\n  selectAllTip: PropTypes.string,\n  keyField: PropTypes.string,\n  selectType: PropTypes.oneOf(['checkbox', 'radio']) // 如果是 radio， selectAll  onSelectAll 没意义\n}\n\nSelectTable.defaultProps = {\n  selectType: 'checkbox'\n}\n\nexport default SelectTable\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport ExpandTable from './expand_table'\nimport hocSelectTable from 'react-table/lib/hoc/selectTable'\nimport _ from 'lodash'\nimport diyTableHOC from './diy_table'\n\nconst HocSelectTable = hocSelectTable(ExpandTable)\n@diyTableHOC\nclass ExpandSelectTable extends React.Component {\n  showDiySelector = bool => {\n    this.ref.showDiySelector(bool)\n  }\n\n  isSelected = (key) => {\n    const { selected } = this.props\n\n    return selected.includes(key)\n  }\n\n  handleToggleSelection = (key) => {\n    const { selected, onSelect, selectType } = this.props\n\n    if (selectType === 'radio') {\n      onSelect([key])\n    } else {\n      onSelect(_.xor(selected, [key]))\n    }\n  }\n\n  render () {\n    const {\n      loading, data, columns,\n      defaultPageSize,\n      selectAll, onSelectAll, selectAllTip,\n      selectType,\n      keyField,\n      SubComponent,\n      noDataText, loadingText,\n      ...rest\n    } = this.props\n\n    return (\n      <div className='gm-react-table-select'>\n        <HocSelectTable\n          {...rest}\n          ref={ref => (this.ref = ref)}\n          loading={loading}\n          data={data}\n          columns={columns}\n          defaultPageSize={defaultPageSize}\n          className='-striped -highlight'\n          showPagination={false}\n          selectAll={selectAll}\n          isSelected={this.isSelected}\n          toggleSelection={this.handleToggleSelection}\n          toggleAll={onSelectAll}\n          selectType={selectType}\n          keyField={keyField}\n          noDataText={noDataText}\n          loadingText={loadingText}\n          SubComponent={SubComponent}\n        />\n        {selectAllTip && selectAll && <div className='gm-react-table-select-all-tip'>{selectAllTip}</div>}\n      </div>\n    )\n  }\n}\n\nExpandSelectTable.propTypes = {\n  loading: PropTypes.bool,\n  data: PropTypes.array.isRequired,\n  columns: PropTypes.array.isRequired,\n  selected: PropTypes.array.isRequired,\n  onSelect: PropTypes.func.isRequired,\n  selectAll: PropTypes.bool.isRequired,\n  onSelectAll: PropTypes.func.isRequired,\n  selectAllTip: PropTypes.string,\n  keyField: PropTypes.string,\n  selectType: PropTypes.oneOf(['checkbox', 'radio']), // 如果是 radio， selectAll  onSelectAll 没意义\n  SubComponent: PropTypes.func.isRequired\n}\n\nExpandSelectTable.defaultProps = {\n  selectType: 'checkbox'\n}\n\nexport default ExpandSelectTable\n"],"sourceRoot":""}